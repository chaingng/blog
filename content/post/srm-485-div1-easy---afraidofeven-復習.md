+++
title = "SRM 485 DIV1 Easy - AfraidOfEven (復習×)"
date = 2014-01-26T13:28:00Z
updated = 2015-03-26T19:45:09Z
tags = ["実装"]
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=11146&amp;rd=14238" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=11146&amp;rd=14238</a><br /><br />・ある数列が与えられる。<br />・その数列は等差数列だが、偶数の数字は奇数になるまで２で割られている。<br />このとき、もとの等差数列を求める。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />等差数列の差と、初項が決まれば等差数列になるかどうかは容易に判定できる。<br />問題文から数字はintの範囲なので、この範囲で全探索すれば答えが求まる。<br /><br />＃もしくは、初項が偶数・奇数、差が偶数、奇数の場合を考えると<br />２項目から０項目の差/2、もしくは３項目から１項目の差/2が答えになることがわかる。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">class AfraidOfEven {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>vector&lt;int&gt; calc(vector&lt;int&gt; org,int d){<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int invalid=0;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,1,org.size()){<br /><br /><span class="Apple-tab-span" style="white-space: pre;">   </span>while(1){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(org[i]!=org[i-1]+d)org[i]*=2;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>else break;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(org[i]&lt;1||org[i]&gt;org[i-1]+d){<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>invalid=1;<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>break;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(invalid){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>org[0]=-1;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>return org;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return org;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>vector&lt;int&gt; restoreProgression(vector&lt;int&gt; seq) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>vector&lt;int&gt; ans;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(d,-1000,1001){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>vector&lt;int&gt; cur=seq;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>while(cur[0]&lt;=1e+9){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>vector&lt;int&gt; tmp=calc(cur,d);<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(tmp[0]!=-1 &amp;&amp; (ans.empty()||ans&gt;tmp))ans=tmp;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(cur[0]&gt;1e+8)break;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>cur[0]*=2;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ans;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">using namespace std;<br /><br />#define all(c) (c).begin(),(c).end()<br />#define FORE(i,d,e) for(int i=d;i&lt;e;i++)<br />#define FOR(i,s,e) for (int i = int(s); i != int(e); i++)<br />#define FORIT(i,c) for (typeof((c).begin()) i = (c).begin(); i != (c).end(); i++)<br />#define ISEQ(c) (c).begin(), (c).end()<br /><br />class AfraidOfEven {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>vector&lt;int&gt; restoreProgression(vector&lt;int&gt; seq) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int n=seq.size();<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>vector&lt;int&gt; ans;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>for(long long first=seq[0];first&lt;=INT_MAX;first*=2){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>for(long long second=seq[1];second&lt;=INT_MAX;second*=2){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>int ok=1;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>long long d=second-first;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>FORE(i,0,n){<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>long long cur=first+d*i;<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>if(cur&lt;1||cur&gt;INT_MAX||cur%seq[i]!=0){<br /><span class="Apple-tab-span" style="white-space: pre;">      </span>ok=0;<br /><span class="Apple-tab-span" style="white-space: pre;">      </span>break;<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>cur/=seq[i];<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>if((cur&amp;(cur-1))!=0){<br /><span class="Apple-tab-span" style="white-space: pre;">      </span>ok=0;<br /><span class="Apple-tab-span" style="white-space: pre;">      </span>break;<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(ok){<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>FORE(i,0,n)ans.push_back(first+i*d);<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>return ans;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ans;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
