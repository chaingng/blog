+++
title = "SRM 470 DIV1 Easy - DoorsGame ○"
date = 2015-05-04T21:43:00Z
updated = 2015-08-08T07:17:06Z
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=10915&amp;rd=14153" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=10915&amp;rd=14153</a><br /><br />AからPまでの16色のいずれかの色がついたドアがある。<br /><br />Johnは最初左端におり、Brusは最初右端にいる。<br />Johnからスタートし、交互に好きな色を選んでいく。<br />選ばれた色のドアはすべてオープンする。<br /><br />また、トロフィーが置かれている場所もわかっている。<br /><br />このとき、Johnが勝つときはそのターン数を、<br />Brusが勝つときはそのターン数にー１をかけたものを、<br />引き分けのときは０を返す。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />色の選び方は最大１６！となり単純な全探索では解くことができない。<br /><br />今回、JohnとBrusがドアを開けていくのに必要な情報は、<br />「john側だけにある色数」「Brus側だけにある色数」「両方にある色のドアの色数」<br />だけであり、各ドアの色の種類や数は関係ない。<br /><br />上記の集合に変換することができれば、<br />あとは各プレイヤーが最適な戦略をとるようにして全探索で解くことができる。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">class DoorsGame {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public: int determineOutcome(string doors, int trophy) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int n=doors.size();<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int a=0,b=0,common=0;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>for(char ch='A';ch&lt;='P';ch++){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>int flaga=0,flagb=0;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>for(int j=0;j&lt;trophy;j++)if(doors[j]==ch)flaga=1;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>for(int j=n-1;j&gt;=trophy;j--)if(doors[j]==ch)flagb=1;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(flaga &amp;&amp; flagb)common++;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else if(flaga)a++;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else if(flagb)b++;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int turn=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>while(a+b+common&gt;0){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>turn++;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(turn%2){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(a&gt;0)a--;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>else if(common&gt;0)common--;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>else b--;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else{<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(b&gt;0)b--;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>else if(common&gt;0)common--;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>else a--;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(a+b+common==0)return 0;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else if(a+common==0)return turn;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else if(b+common==0)return -turn;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return -1;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
