+++
title = "SRM 304 DIV1 Easy - PolyMove (復習×)"
date = 2014-01-22T23:36:00Z
updated = 2015-03-26T19:54:38Z
tags = ["DP"]
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=6190&amp;rd=9825" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=6190&amp;rd=9825</a><br /><br />・ある多角形が与えられる。<br />・多角形のうち複数の点を１だけ動かすことができる。<br />・ただし、１度動かした点と隣り合う点は動かすことができない。<br />・また最初の点と最後の点との接続には境界があり、この２つを接続しているとみなすことはできない。<br /><br />このとき、任意の点を動かした時最大となる面積の増分を求める。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />ｄｐの問題。<br /><br />dp[i] ： 点i-1までの最大面積と定義<br /><br />点i-1を動かすか動かさないか、以下のいずれかの最大値を取る<br />・dp[i-1] (点i-1を動かさないケース)<br />・dp[i-2]+score(点i-1を動かしたときのスコア、点iと点i-2は動かさない)<br /><br />ただし、線形にｄｐで解くためには境界についての条件を考慮しなければならない。<br /><br />境界について以下の３つに分けることで単純なｄｐになる。<br />・点０、点n－１が動かない場合（０とn－１の間に境界）<br />・点０のみ動く場合（１と２の間に境界）<br />・点ｎ－１のみ動く場合（０と１の間に境界）<br /><br />３つの最大のものが最終的な答えになる。<br /><div><br /></div><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">class PolyMove {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>double calc(int x1,int y1,int x2,int y2){<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))*0.5;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>double addedArea(vector&lt;int&gt; x, vector&lt;int&gt; y) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>double ret=0.0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int n=x.size();<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>double dp[n];<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>memset(dp,0,sizeof(dp));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,2,n)dp[i]=max(dp[i-1],dp[i-2]+calc(x[i-2],y[i-2],x[i],y[i]));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>ret=max(ret,dp[n-1]);<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>memset(dp,0,sizeof(dp));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>dp[1]=calc(x[1],y[1],x[n-1],y[n-1]);<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>dp[2]=dp[1];<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,3,n)dp[i]=max(dp[i-1],dp[i-2]+calc(x[i-2],y[i-2],x[i],y[i]));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>ret=max(ret,dp[n-1]);<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>memset(dp,0,sizeof(dp));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>dp[0]=calc(x[0],y[0],x[n-2],y[n-2]);<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>dp[1]=dp[0];<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,2,n-1)dp[i]=max(dp[i-1],dp[i-2]+calc(x[i-2],y[i-2],x[i],y[i]));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>ret=max(ret,dp[n-2]);<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
