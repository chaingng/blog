+++
title = "SRM 546 DIV1 Easy - KleofasTail （復習○）"
date = 2013-08-18T20:12:00Z
updated = 2015-03-26T20:31:12Z
tags = ["数学"]
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=12049&amp;rd=14738" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=12049&amp;rd=14738</a><br /><br />整数が与えられる。<br /><br />整数が偶数のときは２で割り、奇数であれば１を引くことができる。<br /><br />整数の範囲とある数が与えられた時、<br />その整数の範囲内である数が存在する数が何通りあるか求める。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />数が１０＾１８のため、範囲中の全ての数を全探索で求めることはできない。<br /><br />そのため、法則がないか数を列挙してみる。<br />ここで状態遷移図を用いてみる。<br /><br />１）ｋが偶数のとき<br />Ｋ←２Ｋ←２Ｋ＋１←４Ｋ＋２←８Ｋ＋４<br />　　　　　　　　　　　　　　←４Ｋ＋３<br />　　　　←４Ｋ←８Ｋ←１６Ｋ<br />　　　　　　　　　　←８Ｋ＋１<br />　　　　　　　←４Ｋ＋１←８Ｋ＋２<br />　←Ｋ＋１←２Ｋ＋２←４Ｋ＋４←８Ｋ＋８<br />　　　　　　　　　　　　　　　←４Ｋ＋５<br />　　　　　　　　　　←２Ｋ＋３←４Ｋ＋６→４Ｋ＋７<br /><br />２）ｋが奇数のとき<br />Ｋ←２Ｋ←２Ｋ＋１←４Ｋ＋２←８Ｋ＋４<br />　　　　　　　　　　　　　　←４Ｋ＋３<br />　　　　←４Ｋ←８Ｋ←１６Ｋ<br />　　　　　　　　　　←８Ｋ＋１<br />　　　　　　　←４Ｋ＋１←８Ｋ＋２<br /><br />つまり、以下の法則が導ける。<br />ｋが偶数のときは<br />　Ｋ～Ｋ＋１，２Ｋ～２Ｋ＋３、４Ｋ～４Ｋ＋７<br />ｋが奇数のときは<br />　Ｋ、２Ｋ～２Ｋ＋１、４Ｋ～４Ｋ＋３<br />最小はＫの倍数、最大はＫもしくはＫ＋１から始まり２倍＋１となる。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">class KleofasTail {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>long long calc(long long K,long long B){<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>long long ans=0,low=K,high=K;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(K%2==0)high++;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>while(low&lt;=B){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>ans+=min(high,B)-low+1;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>low=2*low;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>high=2*high+1;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ans;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>long long countGoodSequences(long long K, long long A, long long B) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(K==0)return B-A+1;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return calc(K,B)-calc(K,A-1);<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div><br /><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">using namespace std;<br /><br />#define FORE(i,d,e) for(int i=d;i&lt;e;i++)<br />#define FOR(i,s,e) for (int i = int(s); i != int(e); i++)<br />#define FORIT(i,c) for (typeof((c).begin()) i = (c).begin(); i != (c).end(); i++)<br />#define ISEQ(c) (c).begin(), (c).end()<br /><br />class KleofasTail {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>long long countGoodSequences(long long K, long long A, long long B) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(K==0)return B-A+1;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>long long ret=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>long long e= K%2==1 ? 1 : 2;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>long long cur=K;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>while(cur&lt;=B){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>long long minx=max(cur,A);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>long long maxx=min(cur+e-1,B);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>ret+=max(0LL,maxx-minx+1);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>cur*=2,e*=2;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
