+++
title = "SRM 556 DIV1 Middle - LeftRightDigitsGame2　（復習×××）"
date = 2014-02-23T14:50:00Z
updated = 2014-08-18T20:09:44Z
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=12198&amp;rd=15178" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=12198&amp;rd=15178</a><br /><br />ある数字の列が与えられる。<br />数字列の左側から順に、空白から始めてその左側もしくは右側に足していって新たな数字の列を作ることができる。<br /><br />また、最低限満たしたい数字の列も与えられる。<br />このとき、最低限満たしたい数字の列よりも大きく、かつできるだけ小さい数字列を求める。<br />ただしそのような数字の列が存在しない場合は””を返す。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />順に考えると手掛かりがないので、逆の操作をすることを考える。<br /><br />逆の操作を考えると、最後の文字列はそれまでできた文字列の左側もしくは右側に足すことになる。<br />また、最後から２番目の文字列はそれまでにできた文字列の左側、もしくは右側に、、、とｄｐに落とすことができる。<br /><br />ｄｐの状態としては、これまで左側に振り分けた文字、右側に振り分けた文字と、それぞれ振り分けた数字と最低限満たしたい文字列との大小関係を保存する。<br /><br />大小関係は文字列数分振り分けた後に、最小文字以上かどうかを判定するのに利用する。<br /><br />各ｄｐでの判定については、左側に振り分けた文字については左から順に決まっていくので、それまで＝であったときのみ大小関係を新たに判定する。<br />右側に振り分けた文字は右側から決まっていくので、毎回大小関係を判定する。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">using namespace std;<br /><br />#define all(c) (c).begin(),(c).end()<br />#define FORE(i,d,e) for(int i=d;i&lt;e;i++)<br />#define FOR(i,s,e) for (int i = int(s); i != int(e); i++)<br />#define FORIT(i,c) for (typeof((c).begin()) i = (c).begin(); i != (c).end(); i++)<br />#define ISEQ(c) (c).begin(), (c).end()<br /><br />int n;<br />string digits,lowerbound;<br />string dp[60][60][3][3];<br />int used[60][60][3][3];<br /><br />class LeftRightDigitsGame2 {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>string rec(int l,int r,int cmpl,int cmpr){<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(used[l][r][cmpl][cmpr])return dp[l][r][cmpl][cmpr];<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(n-l-r-1&lt;0)return (cmpl==2 || (cmpl==1&amp;&amp;cmpr&gt;=1)) ? "" : "#";<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int cmpl2=cmpl,cmpr2=cmpr;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>dp[l][r][cmpl][cmpr]="#";<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>used[l][r][cmpl][cmpr]=1;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>string str="#";<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(cmpl==1){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(digits[n-l-r-1]&gt;lowerbound[l])cmpl2=2;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(digits[n-l-r-1]&lt;lowerbound[l])cmpl2=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>str=rec(l+1,r,cmpl2,cmpr);<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(str!="#")dp[l][r][cmpl][cmpr]=digits[n-l-r-1]+str;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(digits[n-l-r-1]&gt;lowerbound[n-r-1])cmpr2=2;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(digits[n-l-r-1]&lt;lowerbound[n-r-1])cmpr2=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>str=rec(l,r+1,cmpl,cmpr2);<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(str!="#"){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(dp[l][r][cmpl][cmpr]=="#")dp[l][r][cmpl][cmpr]=str+digits[n-l-r-1];<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else dp[l][r][cmpl][cmpr]=min(dp[l][r][cmpl][cmpr],str+digits[n-l-r-1]);<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return dp[l][r][cmpl][cmpr];<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>string minNumber(string digits_, string lowerBound_) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>digits=digits_;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>lowerbound=lowerBound_;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>n=digits.size();<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>memset(used,0,sizeof(used));<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>string ret=rec(0,0,1,1);<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret=="#" ? "" : ret;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
