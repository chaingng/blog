+++
title = "SRM 656 DIV1 Easy - RandomPancakeStack xx"
date = 2015-04-21T15:58:00Z
updated = 2015-08-07T13:04:44Z
tags = ["DP"]
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=13747&amp;rd=16416" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=13747&amp;rd=16416</a><br /><br />・N個のパンケーキが与えられ、i番目のパンケーキの幅はi+1になる。<br />　また、各パンケーキのおいしさの値が与えられる。<br />・ここからパンケーキをひとつづつ選び、上に重ねていく。<br />　ただし、現在積み重ねられている一番上のパンケーキより幅が大きいパンケーキを選んだらそこで終了となる。<br /><br />・ランダムにパンケーキが重ねられるとき、パンケーキおおいしさの値の期待値を求める。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />期待値の問題なのでｄｐが使えそう。（<a href="http://chngng.blogspot.jp/2014/02/srm-607-div1-easy-palindromicsubstrings.html" target="_blank">SRM607</a>）<br />現在積み重ねられているパンケーキについて、<br />dp[現在の幅の広さ][現在のパンケーキの数]と定義する。<br /><br />このとき、各dp[i][j]についてdp[0〜i][j+1]を更新してあげればよい。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">double dp[310][310];<br /><br />class RandomPancakeStack {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public: double expectedDeliciousness(vector&lt;int&gt; d) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>memset(dp,0,sizeof(dp));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int n=d.size();<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,0,n+1)dp[n][0]=1.0;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>//recurrence<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>for(int i=n-1;i&gt;=0;i--){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>for(int j=1;j&lt;=n;j++){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>for(int k=i+1;k&lt;=n;k++)dp[i][j]+=dp[k][j-1]/(n-(j-1));<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>//transition<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>/*for(int i=n;i&gt;=0;i--){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>for(int j=0;j&lt;n;j++){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>for(int k=0;k&lt;i;k++)dp[k][j+1]+=dp[i][j]/(n-j);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}*/<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>double ret=0.0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,0,n)FORE(j,0,n+1)ret+=d[i]*dp[i][j];<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
