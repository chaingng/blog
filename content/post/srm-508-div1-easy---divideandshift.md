+++
title = "SRM 508 DIV1 Easy - DivideAndShift"
date = 2015-05-09T15:47:00Z
updated = 2015-05-09T15:47:07Z
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=11434&amp;rd=14437" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=11434&amp;rd=14437</a><br /><br />数字の列と、現在の位置が与えられる。<br />２つの操作のいずれかによって、位置を１番目に移動させたい。<br /><br />・位置を右か左に移動<br />・現在の列数の素数で割り、列の長さを列／素数に変換<br /><br />このときの最小の操作回数を求める。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />N,Mが大きいのでdpでは配列を確保できない。<br /><br />今回２つの匝瑳のうち、<br />移動の操作は割る操作よりも後で行えばよいので<br />各列についてたかだか１回の操作でよい。<br /><br />よって各列について割る操作すべてについてBFSで調べていき、<br />また移動についても各列1度のみ調べていけばよい。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">class DivideAndShift {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>int getLeast(int N, int M) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int ret=1e+9;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int prime[N+1];<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>memset(prime,1,sizeof(prime));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>prime[0]=0,prime[1]=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>for(int i=2;i&lt;=N;i++)if(prime[i]){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>for(int j=i+i;j&lt;=N;j+=i)prime[j]=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>queue&lt;pair&lt;pair&lt;int,int&gt;,int&gt; &gt; q;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>q.push(make_pair(make_pair(N,M-1),0));<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>while(!q.empty()){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>int x=q.front().first.first;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>int pos=q.front().first.second;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>int turn=q.front().second;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>q.pop();<br /><br /><span class="Apple-tab-span" style="white-space: pre;">   </span>ret=min(ret,turn+min(pos,x-pos));<br /><br /><span class="Apple-tab-span" style="white-space: pre;">   </span>vector&lt;int&gt; vx;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>for(int i=2;i*i&lt;=x;i++)if(x%i==0){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(prime[i])vx.push_back(i);<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(prime[x/i])vx.push_back(x/i);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(prime[x])vx.push_back(x);<br /><br /><span class="Apple-tab-span" style="white-space: pre;">   </span>FORE(i,0,vx.size()){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>int len=x/vx[i];<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>q.push(make_pair(make_pair(len,pos%len),turn+1));<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
