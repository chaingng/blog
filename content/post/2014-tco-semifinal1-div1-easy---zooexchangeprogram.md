+++
title = "2014 TCO Semifinal1 DIV1 Easy - ZooExchangeProgram"
date = 2015-04-22T15:53:00Z
updated = 2015-04-22T15:53:38Z
tags = ["全探索"]
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=13268&amp;rd=16187" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=13268&amp;rd=16187</a><br /><br />・複数の動物がおりラベルが付けられている。<br />・そのうち番号がlowerからupperまでのラベルの動物を各種類最低１匹ずつ選びたい。<br />　その他の動物については１匹も選ばないようにしたい。<br /><br />・動物の選び方としては隣り合う動物については一つの集合とすることができる。<br />・このとき、そのような動物の選び方のうち一番少なくなる集合数を求める。<br />　そのような選び方がない場合は−１を返す。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />たとえばサンプルから選ぶラベルが２〜６のとき、<br />{[3, 4, 3], 1, [6, 2, 5, 7, 5, 2]}が選ぶ集合となる。<br /><br />同じラベルの動物は１種類以上であれば問題ないので、<br />選ぶだけ選んだ方が集合が少なくなるので存在するものはすべて貪欲に選ぶ。<br /><br />このとき、要素数は最大４４なので集合数は最大２２個となる。<br />このとき集合の選び方は2^22となり全探索が可能なので、<br />すべての選び方に対し、すべてのラベルの動物が含まれているか判定すればよい。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">long long dp[2000000];<br /><br />class ZooExchangeProgram {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public: int getNumber(vector&lt;int&gt; label, int lower, int upper) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int n=label.size();<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int count=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>for(int pos=0;pos&lt;n;pos++){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>while(pos&lt;n &amp;&amp; !(lower&lt;=label[pos] &amp;&amp; label[pos]&lt;=upper))pos++;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(pos&gt;=n)break;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">   </span>long long mask=0;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>while(pos&lt;n){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(lower&lt;=label[pos] &amp;&amp; label[pos]&lt;=upper){<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>mask|=(1LL&lt;&lt;label[pos]);<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>pos++;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>else break;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>dp[count++]=mask;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int ret=1e+9;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>for(int i=0;i&lt;(1&lt;&lt;count);i++){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>long long mask=0;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>FORE(j,0,count)if(i&amp;(1&lt;&lt;j))mask|=dp[j];<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(mask == (((1LL&lt;&lt;(upper+1))-1) &amp; ~((1LL&lt;&lt;lower)-1))){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>ret=min(ret,__builtin_popcount(i));<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret==1e+9 ? -1 : ret;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
