+++
title = "SRM 609 DIV1 Middle - PackingBallsDiv1 （復習○）"
date = 2014-05-31T07:04:00Z
updated = 2014-06-05T07:57:13Z
blogimport = true 
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br />Ｋ種類のボールがそれぞれX[i]個存在する。<br /><br />各X[i]は、あらかじめ与えられるA,B,C,Dを用いて以下の式で求められる。<br />X[0]=A;<br />X[i]=(X[i-1]*B+C)%D+1<br /><br />ここで、全てのボールをできるだけ少ない箱にまとめたい。<br />それぞれの箱は最大Ｋ個のボールが入り、１つの箱に入っているボールはすべて同じ色か、すべて異なる色でなくてはならない。<br /><br />このとき、できるだけ少ない箱にまとめたときの箱の個数を求める。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />X[i]はlong long型を用いることで容易に求めることができる。<br /><br />箱の詰め方だが、各色のボールは10^9のため単純なｄｐでは解くことができない。<br />そこで詰め方に対して貪欲法で解くことができないか考える。<br /><br />各色に対してＫ個以上のボールがある際には、Ｋ個未満になるまで同じ色のボールを詰めた方がよいのではないかと考える。<br /><br />反例について考えてみる。<br />反例は、各色に対してＫ個以上のボールがあるとき、すべて異なる色で詰める方がよいとする。<br />このとき色の数がｘ＜Ｋであるとき、各箱の個数はｘ個、つまりＫ個未満である。<br />このときはｘ種類それぞれに対してＫ個のボールをつめると箱の数はｘ個、つまりＫ個未満になりよりい解があるので成り立たない。<br />よって、Ｋ個以上のボールがあるときには同色で詰めた方がよい。<br /><br />上記の処理を行うことで各色に残っている数はＫ個未満になるため、あとは全探索を用いてあげればよい。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">using namespace std;<br /><br />#define all(c) (c).begin(),(c).end()<br />#define FORE(i,d,e) for(int i=d;i&lt;e;i++)<br />#define FOR(i,s,e) for (int i = int(s); i != int(e); i++)<br />#define FORIT(i,c) for (typeof((c).begin()) i = (c).begin(); i != (c).end(); i++)<br />#define ISEQ(c) (c).begin(), (c).end()<br /><br />class PackingBallsDiv1 {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public: int minPacks(int K, int A, int B, int C, int D) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int ret=0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>vector&lt;long long&gt; X(K,0);<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>X[0]=A;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,1,K)X[i]=(X[i-1]*B+C)%D+1;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,0,K){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>ret+=X[i]/K;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>X[i]%=K;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>sort(all(X));<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>int ret2=1e+9;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,0,K)ret2=min(ret2,(int)X[i]+K-i-1);<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret+ret2;<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
