+++
title = "SRM 501 DIV1 Easy - FoxPlayingGame (復習×○)"
date = 2014-01-26T10:06:00Z
updated = 2015-03-26T19:54:39Z
tags = ["DP"]
blogimport = true
draft = true
[author]
	name = "chngng"
	uri = "https://www.blogger.com/profile/14196381724208675248"
+++

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">問題 </h3><br /><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=11284&amp;rd=14430" target="_blank">http://community.topcoder.com/stat?c=problem_statement&amp;pm=11284&amp;rd=14430</a><br /><br />・nA,nB,paramA,paramBが与えられる。<br />・最初は０から始まり、nA回だけparamA/1000を足し、nB回だけparamB/1000をかける。それぞれは好きな順番で行ってもよい。<br /><br />このとき、最大となる値を求める。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">解き方 </h3><br />２つ解き方がある。<br /><br />１つ目は、与えられたパラメータによって法則を見つける、場合分けして解く方法。<br />きちんと整理すれば解くことはできるが、少し複雑なので時間がかかってしまう。<br /><br />２つ目は、dpを利用する方法。<br />今回は乗算の際に最大と最小が入れかわる可能性があるので、最大を求める通常のｄｐ１と最小を求めるｄｐ２の２つが必要。<br />データ構造と解き方が分かればこちらが確実でコーディングも早い。<br /><br />コードは上記がｄｐの方法、コメントアウトしているのが１つめの方法。<br /><br /><h3 style="border-bottom: 2px solid slateblue; border-left: 8px solid navy; color: black; padding: 0px 0px 1px 5px;">コード </h3><br /><div style="background-color: #e3f2fb; border: 1px dotted #CCCCCC; padding: 5px;">class FoxPlayingGame {<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>public:<br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>double theMax(int nA, int nB, int paramA, int paramB) {<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>double dp1[60][60]={},dp2[60][60]={};<br /><br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>FORE(i,0,nA+1){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>FORE(j,0,nB+1){<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(i+j){<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>dp1[i][j]=-1e+100;<br /><span class="Apple-tab-span" style="white-space: pre;">     </span>dp2[i][j]=1e+100;<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(i)dp1[i][j]=max(dp1[i][j],dp1[i-1][j]+0.001*paramA);<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(j)dp1[i][j]=max(dp1[i][j],max(dp1[i][j-1]*0.001*paramB,dp2[i][j-1]*0.001*paramB));<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(i)dp2[i][j]=min(dp2[i][j],dp2[i-1][j]+0.001*paramA);<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(j)dp2[i][j]=min(dp2[i][j],min(dp1[i][j-1]*0.001*paramB,dp2[i][j-1]*0.001*paramB));<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return dp1[nA][nB];<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>/*double ret=0.0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>double pA=paramA/1000.0;<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>double pB=paramB/1000.0;<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>if(pA&gt;=0){<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(pB&gt;=1)ret=nA*pA*pow(pB,nB);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else if(-1&lt;=pB&amp;&amp;pB&lt;1)ret=nA*pA;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else {<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(nB%2==1)nB=max(0,nB-1);<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>ret=nA*pA*pow(pB,nB);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>else{<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>if(pB&gt;=1)ret=nA*pA;<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else if(0&lt;=pB&amp;&amp;pB&lt;1)ret=nA*pA*pow(pB,nB);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else if(-1&lt;=pB&amp;&amp;pB&lt;0)ret=nA*pA*pow(pB,nB&gt;0);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>else{<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>if(nB%2==0)nB=max(0,nB-1);<br /><span class="Apple-tab-span" style="white-space: pre;">    </span>ret=nA*pA*pow(pB,nB);<br /><span class="Apple-tab-span" style="white-space: pre;">   </span>}<br /><span class="Apple-tab-span" style="white-space: pre;">  </span>}<br /><br /><span class="Apple-tab-span" style="white-space: pre;">  </span>return ret;*/<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>}<br /><br />};</div></div>
